{"version":3,"sources":["Services/Firebase.ts","Config.ts","redux/actions/UserActions.ts","Components/Loading.tsx","Routes/index.tsx","redux/reducers/UserReducer.ts","redux/reducers/index.ts","Components/MainHeader.tsx","index.tsx"],"names":["app","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","setPersistence","Auth","Persistence","LOCAL","database","addUserToAuth","email","password","Promise","resolve","reject","createUserWithEmailAndPassword","then","userDetail","user","catch","error","signin","signInWithEmailAndPassword","id","uid","registerUser","a","data","ref","set","dbStore","console","log","doLogin","type","doLogout","Loading","props","className","LoginRequireRoute","Component","component","rest","state","useSelector","render","isLoggedIn","to","pathname","from","location","LoginNotRequireRoute","intialState","undefined","makeUserLogin","makeUserLogout","RootReducer","combineReducers","action","actions","MainHeader","goToRegisterPage","bind","goToLoginPage","goToHome","this","history","push","signOut","AppBar","position","Toolbar","IconButton","edge","aria-label","color","Typography","variant","style","flexGrow","onClick","currentUser","Button","React","connect","dispatch","bindActionCreators","UserActions","withRouter","HomePage","lazy","LoginPage","PageNotFound","MyProfilePage","RegisterPage","store","createStore","reducer","ReactDOM","basename","fallback","exact","path","document","getElementById"],"mappings":"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","file":"static/js/main.13b31785.chunk.js","sourcesContent":["import config from '../Config';\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/database\";\r\n\r\nexport const app = firebase.initializeApp(config.firebase);\r\nexport const auth = app.auth();\r\nauth.setPersistence(firebase.auth.Auth.Persistence.LOCAL);\r\nexport const database = app.database();\r\n\r\nfunction addUserToAuth(email: string, password: string): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n        auth.createUserWithEmailAndPassword(email, password).then((userDetail) => {\r\n            let user = userDetail.user;\r\n            (userDetail.user) ? resolve(user) : reject(\"No user detail found\");\r\n        }).catch((error) => {\r\n            reject(error);\r\n        });\r\n    });\r\n}\r\nexport const signin = (email: string, password: string): Promise<any> => {\r\n    return new Promise((resolve, reject) => {\r\n        auth.signInWithEmailAndPassword(email, password).then((userDetail) => {\r\n            let user = userDetail.user;\r\n            (userDetail.user) ? resolve({id: user?.uid, email:user?.email}) : reject(\"No user detail found\");\r\n        }).catch((error) => {\r\n            reject(error);\r\n        });\r\n    });\r\n}\r\n\r\nexport const registerUser = async (email: string, password:string): Promise<any> => {\r\n    try {\r\n        let user    = await addUserToAuth(email, password);\r\n        let data    = {id: user.uid, email: user.email};\r\n        let dbStore = await database.ref(\"/users/\" + user.uid).set(data);\r\n        console.log(\"@dbStqore\", dbStore);\r\n        return Promise.resolve(data);\r\n    } catch(err) {\r\n        return Promise.reject(err);\r\n    }\r\n}","export default {\r\n    firebase : {\r\n        apiKey            : \"AIzaSyBejxnH9aZVwSyP-ea9ETP0fPHuX6j2g-0\",\r\n        authDomain        : \"react-chat-90df9.firebaseapp.com\",\r\n        projectId         : \"react-chat-90df9\",\r\n        storageBucket     : \"react-chat-90df9.appspot.com\",\r\n        messagingSenderId : \"1008797360315\",\r\n        appId             : \"1:1008797360315:web:10a368c4ac1eab7a6ac99e\",\r\n        measurementId     : \"G-NY1K5ZLSDJ\"\r\n    }\r\n};","const DO_LOGIN = \"DO_LOGIN\";\r\nconst DO_LOGOUT = \"DO_LOGOUT\";\r\n\r\nexport const doLogin = (user: any) => {\r\n    return {\r\n        type: DO_LOGIN,\r\n        user: user\r\n    }\r\n}\r\nexport const doLogout = () => {\r\n    return {\r\n        type: DO_LOGOUT\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nfunction Loading(props:any) {\r\n    return (\r\n        <div className=\"loadingWindow\">\r\n            <div className=\"backdrop\">\r\n            </div>\r\n            <div className=\"loadingContent\">\r\n                <div className=\"loader\"></div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default Loading;","import React, { FunctionComponent } from \"react\";\r\nimport {\r\n  Route, \r\n  Redirect,\r\n  RouteProps, \r\n  RouteComponentProps\r\n} from \"react-router-dom\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../redux/reducers';\r\n\r\ninterface PrivateRouteProps extends RouteProps {\r\n  component:| React.ComponentType<RouteComponentProps<any>> | React.ComponentType<any>;\r\n}\r\n\r\nexport const LoginRequireRoute: FunctionComponent<PrivateRouteProps> = ({component: Component,...rest}) => {\r\n    const state = useSelector((state:RootState) => ({user: state.user}));\r\n    return (\r\n    <Route {...rest}\r\n      render={props =>\r\n        state.user.isLoggedIn ? ( \r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: props.location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport const LoginNotRequireRoute: FunctionComponent<PrivateRouteProps> = ({component: Component, ...rest}) => {\r\n    const state = useSelector((state:RootState) => ({user: state.user}));\r\n    return (\r\n        <Route {...rest}\r\n        render={\r\n            props => {\r\n                return state.user.isLoggedIn ? ( \r\n                    <Redirect \r\n                        to={\r\n                            {\r\n                                pathname: \"/\"\r\n                            }\r\n                        } \r\n                    /> \r\n                ) : (\r\n                    <Component {...props} />\r\n                )\r\n            }\r\n        }\r\n        />\r\n    );\r\n}","export interface UserReduxState {\r\n    isLoggedIn: boolean,\r\n    email: string | undefined,\r\n    id: string | undefined\r\n}\r\n\r\nconst intialState: UserReduxState = {\r\n    isLoggedIn : false,\r\n    email: undefined,\r\n    id:   undefined\r\n}\r\n\r\nconst makeUserLogin = (state:UserReduxState, user:any) => {\r\n    return {...state, isLoggedIn: true, email: user?.email, id: user?.id};\r\n}\r\nconst makeUserLogout = (state:UserReduxState) => {\r\n    return {...state, isLoggedIn: false, email: undefined, id: undefined};\r\n}\r\nexport default ((state:UserReduxState=intialState, action?:{type:string, user?:any}) => {\r\n    let actions:{[key:string] : Function} = {\r\n        \"DO_LOGIN\" : makeUserLogin,\r\n        \"DO_LOGOUT\": makeUserLogout\r\n    };\r\n    return action && action.type in actions ? actions[action.type](state, action?.user) : state;\r\n});","import { combineReducers } from 'redux';\r\nimport UserReducer from './UserReducer';\r\n\r\nconst RootReducer = combineReducers({\r\n    user: UserReducer\r\n});\r\nexport default RootReducer;\r\nexport type RootState = ReturnType<typeof RootReducer>;","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button      from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport { connect } from 'react-redux';\r\nimport { RootState } from '../redux/reducers';\r\nimport * as UserActions from '../redux/actions/UserActions';\r\nimport { bindActionCreators } from 'redux';\r\nimport { auth } from '../Services/Firebase';\r\nclass MainHeader extends React.Component<any, any> {\r\n\r\n    constructor(props:any) {\r\n        super(props);\r\n        this.goToRegisterPage = this.goToRegisterPage.bind(this);\r\n        this.goToLoginPage = this.goToLoginPage.bind(this);\r\n        this.goToHome = this.goToHome.bind(this);\r\n        this.doLogout = this.doLogout.bind(this);\r\n    }\r\n    goToHome() {\r\n        this.props.history.push('/');\r\n    }\r\n    goToRegisterPage() {\r\n        this.props.history.push('/register');\r\n    }\r\n    goToLoginPage() {\r\n        this.props.history.push('/login');\r\n    }\r\n    async doLogout() {\r\n        await auth.signOut();\r\n        await this.props.doLogout();\r\n        this.props.history.push(\"/login\");\r\n    }\r\n    render() {\r\n        return (\r\n            <AppBar position=\"static\">\r\n                <Toolbar>\r\n                    <IconButton edge=\"start\" aria-label=\"menu\" color=\"primary\">\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" style={{flexGrow: 1}} onClick={this.goToHome}>\r\n                        React Chat\r\n                    </Typography>\r\n                    {\r\n                        (!this.props.currentUser.isLoggedIn) ? (\r\n                            <div>\r\n                                <Button color=\"inherit\" onClick={this.goToLoginPage}>Login</Button>\r\n                                |\r\n                                <Button color=\"inherit\" onClick={this.goToRegisterPage}>Register</Button>\r\n                            </div>\r\n                        ) : (\r\n                            <div>\r\n                                <Button color=\"inherit\" onClick={() => {this.props.history.push(\"/myprofile\");}}>My Profile</Button>\r\n                                |\r\n                                <Button color=\"inherit\" onClick={this.doLogout}>Logout</Button>\r\n                            </div>\r\n                        )\r\n                    }\r\n                </Toolbar>\r\n            </AppBar>\r\n        );\r\n    }\r\n}\r\nexport default connect(\r\n    (state:RootState) => ({currentUser: state.user}),\r\n    (dispatch)        => bindActionCreators(UserActions, dispatch)\r\n)(withRouter(MainHeader));","import React, {lazy, Suspense} from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport {LoginNotRequireRoute, LoginRequireRoute} from './Routes';\nimport {createStore } from 'redux';\nimport {Provider} from 'react-redux';\nimport reducer from './redux/reducers';\n\nimport Loading from './Components/Loading';\nimport Header  from './Components/MainHeader';\n\nconst HomePage      = lazy(() => import('./pages/Home'));\nconst LoginPage     = lazy(() => import('./pages/Login'));\nconst PageNotFound  = lazy(() => import('./pages/PageNotFound'));\nconst MyProfilePage = lazy(() => import('./pages/MyProfile'));\nconst RegisterPage  = lazy(() => import('./pages/Register'));\n\nconst store = createStore(reducer);\n\nReactDOM.render( \n    <Provider store={store}>\n      <Router basename=\"/react-chat\">\n        <Header/>\n        <Suspense fallback={<Loading/>}>\n          <Switch>\n              <Route                exact path=\"/\"          component={ HomePage } />\n              <LoginNotRequireRoute exact path=\"/login\"     component={ LoginPage } />\n              <LoginNotRequireRoute exact path=\"/register\"  component={ RegisterPage } />\n              <LoginRequireRoute    exact path=\"/myprofile\" component={ MyProfilePage } />\n              <Route                path=\"*\"                component={ PageNotFound } />\n          </Switch>\n        </Suspense>\n      </Router>\n    </Provider>\n  ,\n  document.getElementById('root')\n);"],"sourceRoot":""}